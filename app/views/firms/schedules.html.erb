<% @s_date_prev = @s_date - 1.day %>
<% @s_date_next = @s_date + 1.day %>
<div class="span3">
	<div class="row-fluid">
		<% unless @s_date == Date.today %>
		<a href="schedules?sdate=<%= Date.today.strftime("%d-%m-%Y")%>">
		<i class="icon-arrow-left"></i> back to today
		</a>
		<% end %>
	</div>

    <div class="input-append date" id="dp3" data-date=<%= @s_date.strftime("%d-%m-%Y")%> data-date-format="dd-mm-yyyy" style="margin-top:7px">
    <input class="span9" size="16" id="datechoice" type="text" value=<%= @s_date.strftime("%d-%m-%Y")%> >
    <span class="add-on"><i class="icon-th"></i></span>
    </div>


    <div class="btn btn-medium btn-primary" onclick="myFunction()">Show shifts</div>
</div>

<div class="span8">
	<div class="row-fluid">
	<div class="span4" id="id4">
		<a href="schedules?sdate=<%= @s_date_prev%>">
			<i class="icon-arrow-left"></i> previous
		</a>
	</div>
	<div class="span4" style="text-align:center">
		<strong><%= @s_date.strftime("%a %d %b") %></strong>
	</div>
	<div class="span4" style="text-align:right">
		<a href="schedules?sdate=<%= @s_date_next%>">
		next <i class="icon-arrow-right"></i>
		</a>
	</div>
</div>
	
	<% if @s_hash_items.any? %>
	<div class="row-fluid shedulecontainer">
	<%= render partial: 's_hash_item', collection: @s_hash_items %>
	<%= will_paginate @s_hash_items %>
	
		<% else %>
		No shifts created for this date.
	<% end %>

</div>


<script>
$('#dp3').datepicker().on('changeDate', function() {
    //Retrieve the date located on the data of your datepicker
    var datevalue = $('#dp3').data("date");
    window.open(datevalue,"_self");
});
</script>

<script>
function myFunction()
{
datevalue = document.getElementById("datechoice").value
window.open("schedules?sdate=" + datevalue,"_self");
}
</script>


<script>
$(function(){
window.prettyPrint && prettyPrint();
$('#dp1').datepicker({
	format: 'dd-mm-yyyy'
	});
$('#dp2').datepicker();
$('#dp3').datepicker();
$('#dp3').datepicker();
$('#dpYears').datepicker();
$('#dpMonths').datepicker();
var startDate = new Date(2012,1,20);
var endDate = new Date(2012,1,25);
$('#dp4').datepicker()
.on('changeDate', function(ev){
if (ev.date.valueOf() > endDate.valueOf()){
$('#alert').show().find('strong').text('The start date can not be greater then the end date');
} else {
$('#alert').hide();
startDate = new Date(ev.date);
$('#startDate').text($('#dp4').data('date'));
}
$('#dp4').datepicker('hide');
});
$('#dp5').datepicker()
.on('changeDate', function(ev){
if (ev.date.valueOf() < startDate.valueOf()){
$('#alert').show().find('strong').text('The end date can not be less then the start date');
} else {
$('#alert').hide();
endDate = new Date(ev.date);
$('#endDate').text($('#dp5').data('date'));
}
$('#dp5').datepicker('hide');
});
// disabling dates
var nowTemp = new Date();
var now = new Date(nowTemp.getFullYear(), nowTemp.getMonth(), nowTemp.getDate(), 0, 0, 0, 0);
var checkin = $('#dpd1').datepicker({
onRender: function(date) {
return date.valueOf() < now.valueOf() ? 'disabled' : '';
}
}).on('changeDate', function(ev) {
if (ev.date.valueOf() > checkout.date.valueOf()) {
var newDate = new Date(ev.date)
newDate.setDate(newDate.getDate() + 1);
checkout.setValue(newDate);
}
checkin.hide();
$('#dpd2')[0].focus();
}).data('datepicker');
var checkout = $('#dpd2').datepicker({
onRender: function(date) {
return date.valueOf() <= checkin.date.valueOf() ? 'disabled' : '';
}
}).on('changeDate', function(ev) {
checkout.hide();
}).data('datepicker');
});
</script> 

